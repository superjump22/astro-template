const s=(e,t=void 0)=>{const a=["dark","light"].includes(e)?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",n=window.matchMedia("(prefers-reduced-motion: reduce)");t??(t="startViewTransition"in document&&!n.matches),t&&(t="startViewTransition"in document&&!n.matches);const o=()=>{let d=!1;a==="dark"?document.documentElement.classList.contains("dark")||(document.documentElement.classList.add("dark"),d=!0):document.documentElement.classList.contains("dark")&&(document.documentElement.classList.remove("dark"),d=!0),d&&document.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:a}}))};t?document.startViewTransition(()=>{o()}):o()},m=()=>{const e=localStorage.getItem("theme")??"",t=["dark","light"].includes(e)?e:"system";e===""&&localStorage.setItem("theme",t),s(t,!1)};m(),(!window.AstroTheme||!window.AstroTheme.setTheme)&&(window.AstroTheme||(window.AstroTheme={}),window.AstroTheme.setTheme=e=>{["dark","light","system"].includes(e)&&(localStorage.setItem("theme",e),s(e))},window.addEventListener("storage",e=>{e.key==="theme"&&s(e.newValue)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{localStorage.getItem("theme")==="system"&&s("system")}),document.addEventListener("astro:after-swap",m));
