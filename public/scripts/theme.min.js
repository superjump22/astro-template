const a=(e,t=void 0)=>{const n=["dark","light"].includes(e)?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",s=window.matchMedia("(prefers-reduced-motion: reduce)");t??(t="startViewTransition"in document&&!s.matches),t&&(t="startViewTransition"in document&&!s.matches);const i=()=>{let d=!1;n==="dark"?document.documentElement.classList.contains("dark")||(document.documentElement.classList.add("dark"),d=!0):document.documentElement.classList.contains("dark")&&(document.documentElement.classList.remove("dark"),d=!0),d&&document.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:n}}))};t?document.startViewTransition(()=>{i()}):i()},o=()=>{const e=localStorage.getItem("theme")??"",t=["dark","light"].includes(e)?e:"system";e===""&&localStorage.setItem("theme",t),a(t,!1)};o(),(!window.XivStrat||!window.XivStrat.setTheme)&&(window.XivStrat||(window.XivStrat={}),window.XivStrat.setTheme=e=>{["dark","light","system"].includes(e)&&(localStorage.setItem("theme",e),a(e))},window.addEventListener("storage",e=>{e.key==="theme"&&a(e.newValue)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{localStorage.getItem("theme")==="system"&&a("system")}),document.addEventListener("astro:after-swap",o));
