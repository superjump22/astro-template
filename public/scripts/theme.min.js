const o=(e,t=void 0)=>{const r=["dark","light"].includes(e)?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",d=window.matchMedia("(prefers-reduced-motion: reduce)");t??(t="startViewTransition"in document&&!d.matches),t&&(t="startViewTransition"in document&&!d.matches);const s=()=>{let a=!1;r==="dark"?document.documentElement.classList.contains("dark")||(document.documentElement.classList.add("dark"),a=!0):document.documentElement.classList.contains("dark")&&(document.documentElement.classList.remove("dark"),a=!0),a&&document.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:r}}))};t?document.startViewTransition(()=>{s()}):s()},m=()=>{const e=localStorage.getItem("theme")??"",t=["dark","light"].includes(e)?e:"system";e===""&&localStorage.setItem("theme",t),o(t,!1)};m(),(!window.AstroTheme||!window.AstroTheme.setTheme)&&(window.AstroTheme||(window.AstroTheme={}),window.AstroTheme.setTheme=e=>{["dark","light","system"].includes(e)&&(localStorage.setItem("theme",e),o(e))},window.AstroTheme.getTheme=()=>localStorage.getItem("theme"),window.AstroTheme.getResolvedTheme=()=>{const e=localStorage.getItem("theme");return["dark","light"].includes(e)?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},window.addEventListener("storage",e=>{e.key==="theme"&&o(e.newValue)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{localStorage.getItem("theme")==="system"&&o("system")}),document.addEventListener("astro:after-swap",m));
